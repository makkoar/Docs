# Версионирование

В этой статье описывается, как работает версионирование в Minecraft и NeoForge, а также даются некоторые рекомендации по версионированию модов.

<a id="minecraft"></a>

## Minecraft

Minecraft использует [семантическое версионирование](https://semver.org/lang/ru/). Семантическое версионирование, или сокращенно "semver", имеет формат `мажорная.минорная.патч`. Например, в Minecraft 1.20.2 мажорная версия — 1, минорная — 20, а патч-версия — 2.

Minecraft использует `1` в качестве мажорной версии с 2011 года, когда была представлена версия Minecraft 1.0. До этого схема версионирования часто менялась, и существовали такие версии, как `a1.1` (Alpha 1.1), `b1.7.3` (Beta 1.7.3) или даже версии `infdev`, которые вообще не следовали четкой схеме версионирования. Учитывая, что мажорная версия `1` сохраняется уже более десяти лет, и из-за внутренней шутки про Minecraft 2, считается маловероятным, что это когда-либо изменится.

<a id="snapshots"></a>

### Снапшоты

Снапшоты отклоняются от стандартной схемы semver. Они маркируются как `ГГwННa`, где `ГГ` обозначает последние две цифры года (например, `23`), а `НН` — неделю этого года (например, `01`). Таким образом, снапшот `23w01a` — это снапшот, выпущенный в первую неделю 2023 года.

Суффикс `a` существует для случаев, когда в одну неделю выпускаются два снапшота (тогда второй снапшот будет называться примерно `23w01b`). Mojang иногда использовал это в прошлом. Альтернативный суффикс также использовался для снапшотов вроде `20w14infinite`, который был [первоапрельской шуткой 2020 года про бесконечные измерения](https://minecraft.wiki/w/Java_Edition_20w14%E2%88%9E).

<a id="pre-releases-and-release-candidates"></a>

### Пре-релизы и релиз-кандидаты

Когда цикл снапшотов подходит к завершению, Mojang начинает выпускать так называемые пре-релизы. Пре-релизы считаются функционально полными для данной версии и сосредоточены исключительно на исправлении ошибок. Они используют нотацию semver для версии, к которой относятся, с суффиксом `-preX`. Например, первый пре-релиз для 1.20.2 назывался `1.20.2-pre1`. Обычно бывает несколько пре-релизов, которые соответственно получают суффиксы `-pre2`, `-pre3` и т.д.

Аналогично, когда завершается цикл пре-релизов, Mojang выпускает Релиз-кандидат 1 (добавляя к версии суффикс `-rc1`, например `1.20.2-rc1`). Mojang стремится выпустить один релиз-кандидат, который можно будет опубликовать, если не возникнет дальнейших ошибок. Однако, если обнаружится непредвиденная ошибка, могут появиться версии `-rc2`, `-rc3` и т.д., аналогично пре-релизам.

<a id="neoforge"></a>

## NeoForge

NeoForge использует адаптированную систему semver: мажорная версия — это минорная версия Minecraft, минорная версия — это патч-версия Minecraft, а патч-версия — это "фактическая" версия NeoForge. Например, NeoForge 20.2.59 — это 60-я версия (нумерация начинается с 0) для Minecraft 1.20.2. `1` в начале опускается, так как очень маловероятно, что она когда-либо изменится, см. [выше](#minecraft), почему это так.

В некоторых местах NeoForge также использует [диапазоны версий Maven](https://maven.apache.org/enforcer/enforcer-rules/versionRanges.html), например, для диапазонов версий Minecraft и NeoForge в файле [`neoforge.mods.toml`](./Mod%20Files.md#neoforgemodstoml). Они в основном, но не полностью совместимы с semver (например, тег `pre` им не учитывается).

<a id="mods"></a>

## Моды

Не существует единственно лучшей системы версионирования. Различные стили разработки, масштабы проектов и т.д. влияют на выбор системы версионирования. Иногда системы версионирования можно комбинировать. Этот раздел пытается дать обзор некоторых часто используемых систем версионирования с примерами из реальной жизни.

Обычно имя файла мода выглядит как `id_мода-<версия>.jar`. Так, если id нашего мода — `examplemod`, а версия — `1.2.3`, файл мода будет называться `examplemod-1.2.3.jar`.

> **Примечание:**
> Системы версионирования — это скорее предложения, чем строго соблюдаемые правила. Это особенно верно в отношении того, когда версия изменяется ("повышается") и каким образом. Если вы хотите использовать другую систему версионирования, никто вас не остановит.

<a id="semantic-versioning"></a>

### Семантическое версионирование

Семантическое версионирование ("semver") состоит из трех частей: `мажорная.минорная.патч`. Мажорная версия повышается при внесении крупных изменений в кодовую базу, что обычно соответствует крупным новым функциям и исправлениям ошибок. Минорная версия повышается при введении незначительных функций, а повышение патч-версии происходит, когда обновление включает только исправления ошибок.

Обычно считается, что любая версия `0.x.x` является версией для разработки, и с первым (полным) релизом версию следует повысить до `1.0.0`.

Правило "минорная для функций, патч для исправлений" на практике часто игнорируется. Популярным примером этого является сам Minecraft, который вводит крупные функции через минорную версию, незначительные функции — через патч-версию, а исправления ошибок — в снапшотах (см. выше).

В зависимости от того, как часто обновляется мод, эти числа могут быть меньше или больше. Например, [Supplementaries](https://www.curseforge.com/minecraft/mc-mods/supplementaries) имеет версию `2.6.31` (на момент написания). Трех- или даже четырехзначные числа, особенно в `патч`-части, вполне возможны.

<a id="reduced-and-expanded-semver"></a>

### "Урезанное" и "Расширенное" Semver

Иногда можно встретить semver только с двумя числами. Это своего рода "урезанное" semver, или "2-частное" semver. Их номера версий имеют схему только `мажорная.минорная`. Это часто используется небольшими модами, которые добавляют лишь несколько простых объектов и поэтому редко нуждаются в обновлениях (кроме обновлений версии Minecraft), часто оставаясь на версии `1.0` навсегда.

"Расширенное" semver, или "4-частное" semver, имеет четыре числа (например, `1.0.0.0`). В зависимости от мода, формат может быть `мажорная.api.минорная.патч`, или `мажорная.минорная.патч.хотфикс`, или что-то совершенно иное — стандартного способа нет.

Для `мажорная.api.минорная.патч` `мажорная` версия отделена от версии `api`. Это означает, что `мажорная` (функциональная) часть и `api`-часть могут повышаться независимо. Это часто используется модами, которые предоставляют API для использования другими моддерами. Например, [Mekanism](https://www.curseforge.com/minecraft/mc-mods/mekanism) в настоящее время имеет версию 10.4.5.19 (на момент написания).

Для `мажорная.минорная.патч.хотфикс` уровень патча разделен на два. Такой подход используется модом [Create](https://www.curseforge.com/minecraft/mc-mods/create), который в настоящее время имеет версию 0.5.1f (на момент написания). Обратите внимание, что Create обозначает хотфикс буквой вместо четвертого числа, чтобы оставаться совместимым с обычным semver.

> **Информация:**
> "Урезанное semver", "расширенное semver", "2-частное semver" и "4-частное semver" не являются официальными терминами или стандартизированными форматами.

<a id="alpha-beta-release"></a>

### Альфа, Бета, Релиз

Как и в самом Minecraft, моддинг часто проходит через классические стадии `альфа`/`бета`/`релиз`, известные из разработки программного обеспечения, где `альфа` обозначает нестабильную/экспериментальную версию (иногда также называемую `experimental` или `snapshot`), `бета` обозначает полустабильную версию, а `релиз` обозначает стабильную версию (иногда называемую `stable` вместо `release`).

Некоторые моды используют свою мажорную версию для обозначения обновления версии Minecraft. Примером этого является [JEI](https://www.curseforge.com/minecraft/mc-mods/jei), который использует `13.x.x.x` для Minecraft 1.19.2, `14.x.x.x` для 1.19.4 и `15.x.x.x` для 1.20.1 (версий для 1.19.3 и 1.20.0 нет). Другие добавляют тег к имени мода, например, мод [Minecolonies](https://www.curseforge.com/minecraft/mc-mods/minecolonies), который на момент написания имеет версию `1.1.328-BETA`.

<a id="including-the-minecraft-version"></a>

### Включение версии Minecraft

Часто в имя файла мода включают версию Minecraft, для которой он предназначен. Это облегчает конечным пользователям определение версии Minecraft, для которой подходит мод. Обычно это делается либо до, либо после версии мода, причем первый вариант более распространен. Например, JEI версии `16.0.0.28` (последняя на момент написания) для 1.20.2 станет `jei-1.20.2-16.0.0.28` или `jei-16.0.0.28-1.20.2`.

<a id="including-the-mod-loader"></a>

### Включение загрузчика модов

Как вы, вероятно, знаете, NeoForge — не единственный загрузчик модов, и многие разработчики модов создают их для нескольких платформ. В результате необходим способ различать два файла одного и того же мода одной и той же версии, но для разных загрузчиков модов.

Обычно это делается путем включения имени загрузчика модов где-то в названии. `jei-neoforge-1.20.2-16.0.0.28`, `jei-1.20.2-neoforge-16.0.0.28` или `jei-1.20.2-16.0.0.28-neoforge` — все это допустимые способы. Для других загрузчиков модов часть `neoforge` будет заменена на `forge`, `fabric`, `quilt` или любой другой загрузчик модов, для которого вы можете разрабатывать параллельно с NeoForge.

<a id="a-note-on-maven"></a>

### Заметка о Maven

Maven, система, используемая для хостинга зависимостей, использует систему версионирования, которая в некоторых деталях отличается от semver (хотя общий шаблон `мажорная.минорная.патч` сохраняется). Связанная система [Диапазонов версий Maven (Maven Versioning Range, MVR)](https://maven.apache.org/enforcer/enforcer-rules/versionRanges.html) используется в некоторых местах в NeoForge (см. [выше](#neoforge)). При выборе схемы версионирования убедитесь, что она совместима с MVR, иначе моды не смогут указывать зависимость от конкретных версий вашего мода!

---

<div align="center"><table><tr><td align="center">Предыдущий раздел<br><a href="./Structuring%20Your%20Mod.md">Структурирование вашего мода</a></td><td align="center">Следующий раздел<br><a href="../Documentation%20Map.md">Карта Документации</a></td></tr></table></div>
